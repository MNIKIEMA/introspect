(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{8731:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/update-openai-params",function(){return a(6450)}])},6389:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(5105),s=a(9035),o=a.n(s);let l=()=>(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,r.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},3360:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(5105),s=a(8101),o=a(3472),l=a(5379),n=a(6159),i=a(4799);let d=e=>{let{id:t,userType:a,children:d,rootClassNames:c="",contentClassNames:m="max-h-full h-full",containerClassNames:u="flex flex-col md:min-h-screen relative container mx-auto"}=e,[p,h]=(0,s.useState)([]),g=(0,o.useRouter)(),f=e=>{g.push(e)},y=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),f("/log-in")},x=(0,n.usePathname)();return(0,s.useEffect)(()=>{h(("admin"==a?[{title:"Admin",href:"#!",children:[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"align-model",title:"Align Model",href:"/align-model"},{key:"evaluate-model",title:"Evaluate Model",href:"/evaluate-model"}]},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:y}]:a?[{key:"query-data",title:"Query Data",href:"/query-data"},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:y}]:[]).map(e=>(e.current=e.href==x,e)).map(e=>(e.children&&(e.children=e.children.map(e=>(e.current=e.href==x,e))),e)))},[a]),(0,r.jsxs)("div",{className:(0,i.QP)(u,c),children:[p.length?(0,r.jsx)(l.jq,{rootClassNames:(0,i.QP)("border-b dark:border-dark-border","bg-white dark:bg-dark-bg-primary","text-primary-text dark:text-dark-text-primary"),items:p.map(e=>({...e,classNames:(0,i.QP)(e.classNames,"hover:bg-gray-100 dark:hover:bg-dark-hover",e.current&&"bg-gray-100 dark:bg-dark-hover")}))}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("div",{className:m,children:d})]})}},6450:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5105),s=a(8101),o=a(3472),l=a(6389),n=a(3360),i=a(4379),d=a(5379);let c=()=>{let[e,t]=(0,s.useState)(!1),[a,c]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),p=(0,s.useContext)(d.oS),h=(0,o.useRouter)(),g=async()=>{t(!0);let e=localStorage.getItem("defogToken");if(!e){t(!1),p.error("It seems like there was no token found in your session. Please try to log in again.");return}let a=await fetch((0,i.A)("http","integration/get_openai_analysis_params"),{method:"POST",body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json"}});if(a.ok){let e=await a.json();c(e.openai_system_prompt),u(e.openai_user_prompt)}else p.error("There was an error fetching the openai analysis params. Are you sure you are logged in?");t(!1)};return(0,s.useEffect)(()=>{let e=localStorage.getItem("defogUser"),t=localStorage.getItem("defogToken"),a=localStorage.getItem("defogUserType");if(!e||!t||!a){h.push("/log-in");return}t?g():h.push("/log-in")},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsx)(n.A,{id:"manage-users",userType:"admin",children:(0,r.jsxs)("div",{className:"flex justify-left items-left flex-col p-1 mt-5 gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl ",children:"Update OpenAI Analysis Parameters"}),(0,r.jsx)("p",{children:"Here you can update the parameters used for the OpenAI analysis model."}),(0,r.jsxs)("div",{className:"system-prompt",children:[(0,r.jsx)("p",{className:"text-md",children:(0,r.jsx)("span",{className:"font-bold",children:"System Prompt"})}),(0,r.jsx)("textarea",{role:"textbox",value:a,onChange:e=>c(e.target.value),className:"border border-gray-300 p-1 w-full max-h-full",rows:4})]}),(0,r.jsxs)("div",{className:"model-prompt",children:[(0,r.jsxs)("p",{className:"text-md",children:[(0,r.jsx)("span",{className:"font-bold",children:"User Prompt"})," (this is the user prompt used - you must include the placeholder"," ",(0,r.jsx)("code",{className:"text-red",children:"{sql}"}),","," ",(0,r.jsx)("code",{className:"text-red",children:"{question}"}),", and"," ",(0,r.jsx)("code",{className:"text-red",children:"{data_csv}"})," inside the prompt)"]}),(0,r.jsx)("textarea",{role:"textbox",value:m,onChange:e=>u(e.target.value),className:"border border-gray-300 p-1 w-full max-h-full",rows:20})]}),(0,r.jsx)("div",{className:"flex justify-left items-left gap-4",children:(0,r.jsx)("button",{className:" bg-blue-500 border border-blue-200 text-white p-2 rounded-md",onClick:async()=>{t(!0);let e=localStorage.getItem("defogToken");if(!e){t(!1),p.error("It seems like there was no token found in your session. Please try to log in again.");return}(await fetch((0,i.A)("http","integration/set_openai_analysis_params"),{method:"POST",body:JSON.stringify({token:e,openai_system_prompt:a,openai_user_prompt:m}),headers:{"Content-Type":"application/json"}})).ok?p.success("Successfully updated OpenAI analysis params!"):p.error("There was an error updating the OpenAI analysis params. Are you sure you are logged in?"),t(!1)},children:e?"Loading...":"Update OpenAI Analysis Params"})})]})})]})}},4379:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(3184);let s=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat((r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(r.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[328,636,593,792],()=>t(8731)),_N_E=e.O()}]);