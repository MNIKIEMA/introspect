(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{4635:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return a(1544)}])},6389:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(5105),s=a(9035),o=a.n(s);let n=()=>(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,r.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},3360:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(5105),s=a(8101),o=a(3472),n=a(8185),l=a(6159),i=a(4799);let c=e=>{let{id:t,userType:a,children:c,rootClassNames:d="",contentClassNames:m="max-h-full h-full",containerClassNames:h="flex flex-col md:min-h-screen relative container mx-auto"}=e,[u,g]=(0,s.useState)([]),f=(0,o.useRouter)(),x=e=>{f.push(e)},p=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),x("/log-in")},y=(0,l.usePathname)();return(0,s.useEffect)(()=>{g(("admin"==a?[{title:"Admin",href:"#!",children:[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"align-model",title:"Align Model",href:"/align-model"}]},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:p}]:a?[{key:"query-data",title:"Query Data",href:"/query-data"},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:p}]:[]).map(e=>(e.current=e.href==y,e)).map(e=>(e.children&&(e.children=e.children.map(e=>(e.current=e.href==y,e))),e)))},[a]),(0,r.jsxs)("div",{className:(0,i.QP)(h,d),children:[u.length?(0,r.jsx)(n.jq,{rootClassNames:(0,i.QP)("border-b dark:border-dark-border","bg-white dark:bg-dark-bg-primary","text-primary-text dark:text-dark-text-primary"),items:u.map(e=>({...e,classNames:(0,i.QP)(e.classNames,"hover:bg-gray-100 dark:hover:bg-dark-hover",e.current&&"bg-gray-100 dark:bg-dark-hover")}))}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("div",{className:m,children:c})]})}},1544:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5105),s=a(8101),o=a(4443),n=a(3360),l=a(6389),i=a(8185),c=a(3472),d=a(3184);function m(){let e=(0,c.useRouter)(),[t,a]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[u,g]=(0,s.useState)([]),[f,x]=(0,s.useState)(!0),p=async()=>{let e=localStorage.getItem("defogToken");if(!e){x(!1);return}try{let t=await fetch((d.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")+"/get_db_names",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!t.ok)throw Error("Failed to get api key names - are you sure your network is working?");let a=await t.json();g(a.db_names)}catch(e){console.error("Error fetching db names:",e)}finally{x(!1)}};return((0,s.useEffect)(()=>{let t=localStorage.getItem("defogToken"),r=localStorage.getItem("defogUserType");t?(h(r),a(t),p()):setTimeout(()=>{let t=window.location.pathname+window.location.search;e.push({pathname:"/log-in",query:{message:"You are not logged in. Please log in to access reports.",returnUrl:t}})},1500)},[e]),t||f)?!0===f?(0,r.jsx)(i.c5,{}):(0,r.jsxs)("div",{className:"h-screen",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)(n.A,{id:"query-data",userType:m,containerClassNames:"max-h-screen h-screen flex flex-col",contentClassNames:"h-full max-h-full",children:(0,r.jsx)(o.A5,{apiEndpoint:d.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"",token:t,initialDbNames:u})})]}):(0,r.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"text-center p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Not Logged In"}),(0,r.jsx)("p",{className:"mb-4",children:"You are not logged in. Redirecting to login page..."}),(0,r.jsx)(i.c5,{})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[628,328,429,443,636,593,792],()=>t(4635)),_N_E=e.O()}]);